os:
    - linux
matrix:
    allow_failures:
        - os: osx
    include:
        - os: osx
          language: generic
          env: 
              - TOXENV=py34
              - TRAVIS_PYTHON_VERSION=3.4
        - os: osx
          language: generic
          env: 
              - TOXENV=py35
              - TRAVIS_PYTHON_VERSION=3.5
language: python
python:
    - "3.4"
    - "3.5"
before_install:
    - if [[ "$TRAVIS_OS_NAME" == "osx" ]]; then git clone https://github.com/MacPython/terryfy; fi
    - if [[ "$TRAVIS_OS_NAME" == "osx" ]]; then source terryfy/travis_tools.sh; fi
    - if [[ "$TRAVIS_OS_NAME" == "osx" ]]; then get_python_environment macports $TRAVIS_PYTHON_VERSION; fi
install:
    - "pip install -r requirements-hacking.txt"
script: make unittest
